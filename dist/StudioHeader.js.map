{"version":3,"file":"StudioHeader.js","names":["React","useContext","PropTypes","injectIntl","intlShape","AppContext","APP_CONFIG_INITIALIZED","ensureConfig","getConfig","mergeConfig","subscribe","ActionRow","Menu","MenuTrigger","MenuContent","Avatar","LinkedLogo","Logo","CaretIcon","messages","AUTHN_MINIMAL_HEADER","process","env","StudioDesktopHeaderBase","props","userMenu","avatar","username","intl","formatMessage","map","type","href","content","loggedOutItems","item","i","arr","length","logo","logoAltText","logoDestination","loggedIn","actionRowContent","logoProps","src","alt","logoClasses","renderUserMenu","renderLoggedOutItems","Component","propTypes","arrayOf","shape","oneOf","string","bool","element","isRequired","defaultProps","StudioDesktopHeader","StudioHeader","authenticatedUser","config","STUDIO_BASE_URL","LOGOUT_URL","LOGO_URL","SITE_NAME"],"sources":["../src/StudioHeader.jsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { AppContext } from '@edx/frontend-platform/react';\nimport {\n  APP_CONFIG_INITIALIZED,\n  ensureConfig,\n  getConfig,\n  mergeConfig,\n  subscribe,\n} from '@edx/frontend-platform';\nimport { ActionRow } from '@edx/paragon';\n\nimport { Menu, MenuTrigger, MenuContent } from './Menu';\nimport Avatar from './Avatar';\nimport { LinkedLogo, Logo } from './Logo';\n\nimport { CaretIcon } from './Icons';\n\nimport messages from './Header.messages';\n\nensureConfig([\n  'STUDIO_BASE_URL',\n  'LOGOUT_URL',\n  'LOGIN_URL',\n  'SITE_NAME',\n  'LOGO_URL',\n  'ORDER_HISTORY_URL',\n], 'StudioHeader component');\n\nsubscribe(APP_CONFIG_INITIALIZED, () => {\n  mergeConfig({\n    AUTHN_MINIMAL_HEADER: !!process.env.AUTHN_MINIMAL_HEADER,\n  }, 'StudioHeader additional config');\n});\n\nclass StudioDesktopHeaderBase extends React.Component {\n  constructor(props) { // eslint-disable-line no-useless-constructor\n    super(props);\n  }\n\n  renderUserMenu() {\n    const {\n      userMenu,\n      avatar,\n      username,\n      intl,\n    } = this.props;\n\n    return (\n      <Menu transitionClassName=\"menu-dropdown\" transitionTimeout={250}>\n        <MenuTrigger\n          tag=\"button\"\n          aria-label={intl.formatMessage(messages['header.label.account.menu.for'], { username })}\n          className=\"btn btn-outline-primary d-inline-flex align-items-center pl-2 pr-3\"\n        >\n          <Avatar size=\"1.5em\" src={avatar} alt=\"\" className=\"mr-2\" />\n          {username} <CaretIcon role=\"img\" aria-hidden focusable=\"false\" />\n        </MenuTrigger>\n        <MenuContent className=\"mb-0 dropdown-menu show dropdown-menu-right pin-right shadow py-2\">\n          {userMenu.map(({ type, href, content }) => (\n            <a className={`dropdown-${type}`} key={`${type}-${content}`} href={href}>{content}</a>\n          ))}\n        </MenuContent>\n      </Menu>\n    );\n  }\n\n  renderLoggedOutItems() {\n    const { loggedOutItems } = this.props;\n\n    return loggedOutItems.map((item, i, arr) => (\n      <a\n        key={`${item.type}-${item.content}`}\n        className={i < arr.length - 1 ? 'btn mr-2 btn-link' : 'btn mr-2 btn-outline-primary'}\n        href={item.href}\n      >\n        {item.content}\n      </a>\n    ));\n  }\n\n  render() {\n    const {\n      logo,\n      logoAltText,\n      logoDestination,\n      loggedIn,\n      intl,\n      actionRowContent,\n    } = this.props;\n    const logoProps = { src: logo, alt: logoAltText, href: logoDestination };\n    const logoClasses = getConfig().AUTHN_MINIMAL_HEADER ? 'mw-100' : null;\n\n    return (\n      <header className=\"site-header-desktop\">\n        <a className=\"nav-skip sr-only sr-only-focusable\" href=\"#main\">{intl.formatMessage(messages['header.label.skip.nav'])}</a>\n        <div className={`container-fluid ${logoClasses}`}>\n          <div className=\"nav-container position-relative d-flex align-items-center\">\n            {logoDestination === null ? <Logo className=\"logo\" src={logo} alt={logoAltText} /> : <LinkedLogo className=\"logo\" {...logoProps} />}\n            <ActionRow>\n              {actionRowContent}\n              <nav\n                aria-label={intl.formatMessage(messages['header.label.secondary.nav'])}\n                className=\"nav secondary-menu-container align-items-center ml-auto\"\n              >\n                {loggedIn ? this.renderUserMenu() : this.renderLoggedOutItems()}\n              </nav>\n            </ActionRow>\n          </div>\n        </div>\n      </header>\n    );\n  }\n}\n\nStudioDesktopHeaderBase.propTypes = {\n  userMenu: PropTypes.arrayOf(PropTypes.shape({\n    type: PropTypes.oneOf(['item', 'menu']),\n    href: PropTypes.string,\n    content: PropTypes.string,\n  })),\n  loggedOutItems: PropTypes.arrayOf(PropTypes.shape({\n    type: PropTypes.oneOf(['item', 'menu']),\n    href: PropTypes.string,\n    content: PropTypes.string,\n  })),\n  logo: PropTypes.string,\n  logoAltText: PropTypes.string,\n  logoDestination: PropTypes.string,\n  avatar: PropTypes.string,\n  username: PropTypes.string,\n  loggedIn: PropTypes.bool,\n  actionRowContent: PropTypes.element,\n\n  // i18n\n  intl: intlShape.isRequired,\n};\n\nStudioDesktopHeaderBase.defaultProps = {\n  userMenu: [],\n  loggedOutItems: [],\n  logo: null,\n  logoAltText: null,\n  logoDestination: null,\n  avatar: null,\n  username: null,\n  loggedIn: false,\n  actionRowContent: null,\n};\n\nconst StudioDesktopHeader = injectIntl(StudioDesktopHeaderBase);\n\nconst StudioHeader = ({ intl, actionRowContent }) => {\n  const { authenticatedUser, config } = useContext(AppContext);\n\n  const userMenu = authenticatedUser === null ? [] : [\n    {\n      type: 'item',\n      href: `${config.STUDIO_BASE_URL}`,\n      content: intl.formatMessage(messages['header.user.menu.studio.home']),\n    },\n    {\n      type: 'item',\n      href: `${config.STUDIO_BASE_URL}/maintenance`,\n      content: intl.formatMessage(messages['header.user.menu.studio.maintenance']),\n    },\n    {\n      type: 'item',\n      href: config.LOGOUT_URL,\n      content: intl.formatMessage(messages['header.user.menu.logout']),\n    },\n  ];\n\n  const props = {\n    logo: config.LOGO_URL,\n    logoAltText: config.SITE_NAME,\n    logoDestination: config.STUDIO_BASE_URL,\n    loggedIn: authenticatedUser !== null,\n    username: authenticatedUser !== null ? authenticatedUser.username : null,\n    avatar: authenticatedUser !== null ? authenticatedUser.avatar : null,\n    actionRowContent,\n    userMenu,\n    loggedOutItems: [],\n  };\n\n  return <StudioDesktopHeader {...props} />;\n};\n\nStudioHeader.propTypes = {\n  intl: intlShape.isRequired,\n  actionRowContent: PropTypes.element,\n};\n\nStudioHeader.defaultProps = {\n  // eslint-disable-next-line react/jsx-no-useless-fragment\n  actionRowContent: <></>,\n};\n\nexport default injectIntl(StudioHeader);\n"],"mappings":"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"}