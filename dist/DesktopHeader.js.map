{"version":3,"file":"DesktopHeader.js","names":["React","PropTypes","injectIntl","intlShape","getConfig","Menu","MenuTrigger","MenuContent","Avatar","LinkedLogo","Logo","messages","CaretIcon","DesktopHeader","props","mainMenu","Array","isArray","map","menuItem","type","href","content","submenuContent","appMenu","appMenuContent","menuItems","userMenu","avatar","username","intl","formatMessage","loggedOutItems","item","i","arr","length","logo","logoAltText","logoDestination","loggedIn","logoProps","src","alt","logoClasses","AUTHN_MINIMAL_HEADER","renderMainMenu","renderAppMenu","renderUserMenu","renderLoggedOutItems","Component","propTypes","oneOfType","node","array","arrayOf","shape","oneOf","string","bool","isRequired","defaultProps"],"sources":["../src/DesktopHeader.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { getConfig } from '@edx/frontend-platform';\n\n// Local Components\nimport { Menu, MenuTrigger, MenuContent } from './Menu';\nimport Avatar from './Avatar';\nimport { LinkedLogo, Logo } from './Logo';\n\n// i18n\nimport messages from './Header.messages';\n\n// Assets\nimport { CaretIcon } from './Icons';\n\nclass DesktopHeader extends React.Component {\n  constructor(props) { // eslint-disable-line no-useless-constructor\n    super(props);\n  }\n\n  renderMainMenu() {\n    const { mainMenu } = this.props;\n\n    // Nodes are accepted as a prop\n    if (!Array.isArray(mainMenu)) {\n      return mainMenu;\n    }\n\n    return mainMenu.map((menuItem) => {\n      const {\n        type,\n        href,\n        content,\n        submenuContent,\n      } = menuItem;\n\n      if (type === 'item') {\n        return (\n          <a key={`${type}-${content}`} className=\"nav-link\" href={href}>{content}</a>\n        );\n      }\n\n      return (\n        <Menu key={`${type}-${content}`} tag=\"div\" className=\"nav-item\" respondToPointerEvents>\n          <MenuTrigger tag=\"a\" className=\"nav-link d-inline-flex align-items-center\" href={href}>\n            {content} <CaretIcon role=\"img\" aria-hidden focusable=\"false\" />\n          </MenuTrigger>\n          <MenuContent className=\"pin-left pin-right shadow py-2\">\n            {submenuContent}\n          </MenuContent>\n        </Menu>\n      );\n    });\n  }\n\n  // Renders an optional App Menu for\n  renderAppMenu() {\n    const { appMenu } = this.props;\n    const { content: appMenuContent, menuItems } = appMenu;\n    return (\n      <Menu transitionClassName=\"menu-dropdown\" transitionTimeout={250}>\n        <MenuTrigger tag=\"a\" className=\"nav-link d-inline-flex align-items-center\">\n          {appMenuContent} <CaretIcon role=\"img\" aria-hidden focusable=\"false\" />\n        </MenuTrigger>\n        <MenuContent className=\"mb-0 dropdown-menu show dropdown-menu-right pin-right shadow py-2\">\n          {menuItems.map(({ type, href, content }) => (\n            <a className={`dropdown-${type}`} key={`${type}-${content}`} href={href}>{content}</a>\n          ))}\n        </MenuContent>\n      </Menu>\n    );\n  }\n\n  renderUserMenu() {\n    const {\n      userMenu,\n      avatar,\n      username,\n      intl,\n    } = this.props;\n\n    return (\n      <Menu transitionClassName=\"menu-dropdown\" transitionTimeout={250}>\n        <MenuTrigger\n          tag=\"button\"\n          aria-label={intl.formatMessage(messages['header.label.account.menu.for'], { username })}\n          className=\"btn btn-outline-primary d-inline-flex align-items-center pl-2 pr-3\"\n        >\n          <Avatar size=\"1.5em\" src={avatar} alt=\"\" className=\"mr-2\" />\n          {username} <CaretIcon role=\"img\" aria-hidden focusable=\"false\" />\n        </MenuTrigger>\n        <MenuContent className=\"mb-0 dropdown-menu show dropdown-menu-right pin-right shadow py-2\">\n          {userMenu.map(({ type, href, content }) => (\n            <a className={`dropdown-${type}`} key={`${type}-${content}`} href={href}>{content}</a>\n          ))}\n        </MenuContent>\n      </Menu>\n    );\n  }\n\n  renderLoggedOutItems() {\n    const { loggedOutItems } = this.props;\n\n    return loggedOutItems.map((item, i, arr) => (\n      <a\n        key={`${item.type}-${item.content}`}\n        className={i < arr.length - 1 ? 'btn mr-2 btn-link' : 'btn mr-2 btn-outline-primary'}\n        href={item.href}\n      >\n        {item.content}\n      </a>\n    ));\n  }\n\n  render() {\n    const {\n      logo,\n      logoAltText,\n      logoDestination,\n      loggedIn,\n      intl,\n      appMenu,\n    } = this.props;\n    const logoProps = { src: logo, alt: logoAltText, href: logoDestination };\n    const logoClasses = getConfig().AUTHN_MINIMAL_HEADER ? 'mw-100' : null;\n\n    return (\n      <header className=\"site-header-desktop\">\n        <a className=\"nav-skip sr-only sr-only-focusable\" href=\"#main\">{intl.formatMessage(messages['header.label.skip.nav'])}</a>\n        <div className={`container-fluid ${logoClasses}`}>\n          <div className=\"nav-container position-relative d-flex align-items-center\">\n            {logoDestination === null ? <Logo className=\"logo\" src={logo} alt={logoAltText} /> : <LinkedLogo className=\"logo\" {...logoProps} />}\n            <nav\n              aria-label={intl.formatMessage(messages['header.label.main.nav'])}\n              className=\"nav main-nav\"\n            >\n              {this.renderMainMenu()}\n            </nav>\n            {appMenu ? (\n              <nav\n                aria-label={intl.formatMessage(messages['header.label.app.nav'])}\n                className=\"nav app-nav\"\n              >\n                {this.renderAppMenu()}\n              </nav>\n            ) : null}\n            <nav\n              aria-label={intl.formatMessage(messages['header.label.secondary.nav'])}\n              className=\"nav secondary-menu-container align-items-center ml-auto\"\n            >\n              {loggedIn ? this.renderUserMenu() : this.renderLoggedOutItems()}\n            </nav>\n          </div>\n        </div>\n      </header>\n    );\n  }\n}\n\nDesktopHeader.propTypes = {\n  mainMenu: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.array,\n  ]),\n  userMenu: PropTypes.arrayOf(PropTypes.shape({\n    type: PropTypes.oneOf(['item', 'menu']),\n    href: PropTypes.string,\n    content: PropTypes.string,\n  })),\n  loggedOutItems: PropTypes.arrayOf(PropTypes.shape({\n    type: PropTypes.oneOf(['item', 'menu']),\n    href: PropTypes.string,\n    content: PropTypes.string,\n  })),\n  logo: PropTypes.string,\n  logoAltText: PropTypes.string,\n  logoDestination: PropTypes.string,\n  avatar: PropTypes.string,\n  username: PropTypes.string,\n  loggedIn: PropTypes.bool,\n\n  // i18n\n  intl: intlShape.isRequired,\n\n  // appMenu\n  appMenu: PropTypes.shape(\n    {\n      content: PropTypes.string,\n      menuItems: PropTypes.arrayOf(\n        PropTypes.shape({\n          type: PropTypes.string,\n          href: PropTypes.string,\n          content: PropTypes.string,\n        }),\n      ),\n    },\n  ),\n};\n\nDesktopHeader.defaultProps = {\n  mainMenu: [],\n  userMenu: [],\n  loggedOutItems: [],\n  logo: null,\n  logoAltText: null,\n  logoDestination: null,\n  avatar: null,\n  username: null,\n  loggedIn: false,\n  appMenu: null,\n};\n\nexport default injectIntl(DesktopHeader);\n"],"mappings":"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"}